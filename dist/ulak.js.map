{
  "version": 3,
  "sources": ["../src/index.js", "../src/version.js", "../src/isSSR.js", "../src/eventNames.js", "../src/isDebugEnabled.js", "../src/config.js", "../src/payloadsFromIframes.js", "../src/screenshot-button/screenshot-button.js", "../src/bug-report-button/bug-report-button.js", "../src/translations.js", "../src/token.js", "../src/downloadFile.js", "../src/logSender.js", "../src/generateFileName.js", "../src/generatePayload.js", "../src/eventHandlers.js", "../src/consoleInterceptor.js"],
  "sourcesContent": ["import {getLogs, clearLogs, interceptConsole } from './consoleInterceptor';\nimport {LONG_VERSION} from './version';\n\nexport {getLogs, clearLogs, interceptConsole};\n\nconsole.info(LONG_VERSION);\n", "const VERSION = \"0.1.0\";\nconst LONG_VERSION = `Ulak bug reporter v${VERSION}`;\nexport {VERSION};\nexport {LONG_VERSION};\n", "const IS_ON_BROWSER = typeof window === 'object';\nconst IS_SSR = !IS_ON_BROWSER;\nexport {IS_SSR, IS_ON_BROWSER}\n", "const EVENT_NAME_PREFIX = 'ULAK_';\n\nconst AUTH_TOKEN_READY_EVENT = `${EVENT_NAME_PREFIX}AUTH_TOKEN_READY`;\n\nconst RETRIEVE_PAYLOAD_REQUEST = `${EVENT_NAME_PREFIX}RETRIEVE_PAYLOAD_REQUEST`;\nconst RETRIEVE_PAYLOAD_RESPONSE = `${EVENT_NAME_PREFIX}RETRIEVE_PAYLOAD_RESPONSE`;\n\nexport {AUTH_TOKEN_READY_EVENT, RETRIEVE_PAYLOAD_REQUEST, RETRIEVE_PAYLOAD_RESPONSE}\n", "export default function isDebugEnabled() {\n  return typeof window?.ulakDebug === 'boolean' && window.ulakDebug;\n}\n", "import {IS_SSR} from \"./isSSR\";\n\nexport const CONSOLE_LABEL = 'Ulak';\n\n/**\n * http(s)://{host}(:{port})/log-sessions\n * @type {string}\n */\nexport const SERVER_PATH = 'http://localhost:8080/log-sessions'; //FIXME\n\nlet tmpUrl;\nconst hostname = IS_SSR ? \"SSR\" : new URL(location.href).hostname\nif(hostname.endsWith('grispi.com')){\n  tmpUrl = 'https://api.grispi.com';\n} else if(hostname.endsWith('grispi.dev')){\n  tmpUrl = 'https://api.grispi.dev';\n} else {\n  tmpUrl = 'http://localhost:8080';\n}\n\nexport const API_URL = tmpUrl;\nexport const TENANT_ID = 'dedeler'//window.location.host.split('.')[0];\n", "import {RETRIEVE_PAYLOAD_REQUEST} from \"./eventNames\";\nimport isDebugEnabled from \"./isDebugEnabled\";\nimport {CONSOLE_LABEL} from \"./config\";\n\nconst TIMEOUT = 1700; // More than enough to try 3 times (interval timeout is 500)\nlet counter = 0;\nlet payloads = [];\n\nfunction payloadRequested() {\n  counter += 1;\n  isDebugEnabled() && console.debug(CONSOLE_LABEL, 'payloadRequested', counter);\n}\n\nfunction payloadRetrieved(payload) {\n  counter -= 1;\n  payloads.push(payload);\n  isDebugEnabled() && console.debug(CONSOLE_LABEL, 'payloadRetrieved', counter);\n}\n\nfunction payloadsReadyOrTimeout() {\n\n  document.querySelectorAll('iframe')\n    .forEach(el => {\n      el.contentWindow.postMessage({type: RETRIEVE_PAYLOAD_REQUEST}, el.src);\n      payloadRequested();\n    });\n\n  const requestedAt = Date.now();\n  return new Promise((resolve, reject) => {\n    const intervalHandler = setInterval(function () {\n      const elapsed = Date.now() - requestedAt;\n      if (counter === 0 || elapsed > TIMEOUT) {\n        isDebugEnabled() && console.debug(CONSOLE_LABEL, 'payloadsReadyOrTimeout', 'counter', counter, 'elapsed', elapsed);\n        clearInterval(intervalHandler);\n        resolve(payloads);\n        payloads = [];\n        counter = 0;\n      }\n    }, 500);\n  });\n}\n\nexport {payloadRetrieved, payloadsReadyOrTimeout}\n", "let exportedClass;\n\nif (typeof window !== \"undefined\") {\n  class ScreenshotButton extends window.HTMLElement {\n    static #htmlContent = `\n        <style>\n          #canvas, #video {\n            display: none;\n          }\n        </style>\n        <video id=\"video\">Video stream not available.</video>\n        <canvas id=\"canvas\"></canvas>\n        <button id=\"startButton\"></button>\n      `;\n    #text;\n    #useComputedStyle;\n    #timeout;\n    #previewTargetScale;\n    #video;\n    #canvas;\n    #screenshot;\n    #removeAttributes;\n    #optionsFromAttributes;\n\n    constructor() {\n      super();\n      this.attachShadow({mode: 'open'}).innerHTML = ScreenshotButton.#htmlContent;\n    }\n\n    connectedCallback() {\n      this.#text = this.attributes.getNamedItem('text')?.value || 'Take screenshot';\n      this.#useComputedStyle = !!this.attributes.getNamedItem('use-computed-style');\n      this.#removeAttributes = this.attributes.getNamedItem('use-computed-style')?.value?.trim().toLowerCase() === 'remove';\n      this.#timeout = this.attributes.getNamedItem('timeout')?.value || '500';\n      this.#previewTargetScale = this.attributes.getNamedItem('preview-scale')?.value || '0.5';\n\n      this.#optionsFromAttributes = {\n        timeout: this.#timeout,\n        isFromInternalEvent: true\n      }\n\n      this.#video = this.shadowRoot.getElementById('video');\n      this.#canvas = this.shadowRoot.getElementById('canvas');\n      const startButton = this.shadowRoot.getElementById('startButton');\n      startButton.addEventListener('click', this.takeScreenshot.bind(this, this.#optionsFromAttributes), false);\n      startButton.innerText = this.#text;\n\n      if (this.#useComputedStyle) {\n        const computedStyle = window.getComputedStyle(this);\n        Array.from(computedStyle).forEach(key => startButton.style.setProperty(key, computedStyle.getPropertyValue(key), computedStyle.getPropertyPriority(key)));\n\n        if (this.#removeAttributes) {\n          this.removeAttribute('class');\n          this.removeAttribute('style');\n        }\n      }\n    }\n\n    /**\n     * DOM is not guaranteed to be fully loaded neither in constructor nor connectedCallback hence querying as late as\n     * possible is the easiest way.\n     * @returns {HTMLImageElement}\n     */\n    #previewTarget() {\n      return document.querySelector(this.attributes.getNamedItem('preview-target')?.value);\n    }\n\n    takeScreenshot(options) {\n      // Note that there's a second parameter which is an event\n      const isFromInternalEvent = options && options.isFromInternalEvent === true;\n      const timeout = options?.timeout || this.#optionsFromAttributes.timeout;\n\n      return new Promise((resolve, reject) => {\n        // https://github.com/w3c/mediacapture-screen-share/issues/184\n        // https://w3c.github.io/mediacapture-screen-share/#dom-displaycapturesurfacetype\n        navigator.mediaDevices.getDisplayMedia({video: {cursor: \"always\", displaySurface: \"monitor\"}, audio: false})\n          .then((stream) => {\n            this.#video.srcObject = stream;\n            this.#video.play();\n            setTimeout(() => {\n              const streamSettings = stream.getVideoTracks()[0].getSettings();\n              this.#canvas.setAttribute('width', streamSettings.width);\n              this.#canvas.setAttribute('height', streamSettings.height);\n\n              const context = this.#canvas.getContext('2d');\n              context.drawImage(this.#video, 0, 0, this.#canvas.width, this.#canvas.height);\n\n              this.#canvas.toBlob((blob) => {\n                this.#screenshot = blob;\n                resolve(blob);\n              });\n\n              // Set image to target if defined\n              const previewTarget = this.#previewTarget();\n              if (isFromInternalEvent && previewTarget instanceof HTMLImageElement) {\n                previewTarget.src = this.#canvas.toDataURL('image/png');\n                previewTarget.width = this.#canvas.width * this.#previewTargetScale;\n                previewTarget.height = this.#canvas.height * this.#previewTargetScale;\n              }\n\n              // Clear video\n              this.#video.srcObject.getTracks().forEach((track) => track.stop());\n              this.#video.srcObject = null;\n            }, timeout);\n          })\n          .catch((err) => {\n            console.error(`An error occurred: ${err}`);\n            reject(err);\n          });\n      });\n    }\n\n    /**\n     * Returns the first instance found in the document\n     */\n    static instance() {\n      return document.querySelector('screenshot-button');\n    }\n  }\n\n  window.customElements.define('screenshot-button', ScreenshotButton);\n  exportedClass = ScreenshotButton;\n} else {\n  class ScreenshotButton {\n    static instance() {\n      return document.querySelector('screenshot-button');\n    }\n  }\n  exportedClass = ScreenshotButton;\n}\n\nexport default exportedClass;\n", "import ScreenshotButton from \"../screenshot-button/screenshot-button\";\n\nlet exportedClass;\n\nif (typeof window !== \"undefined\") {\n  const textareaPlaceholderText = '(Optional) Message or bug description';\n  const sendButtonText = 'Send';\n  const sendButtonLoadingText = 'Sending...';\n  const cancelText = 'Cancel';\n  const errorText = 'Error';\n  const timeoutErrorMessage = '(TIMEOUT) Sending might not be successful, time out occurred!';\n\n  const sendTimeoutDefault = '10000';\n  const noPermitScreenCaptureImgUrl = 'https://i.imgur.com/MXRT775.png';\n\n  class BugReportButton extends window.HTMLElement {\n\n    static SEND_EVENT_NAME = 'BugReportButton:Send'\n\n    static SENDING_DONE_EVENT_NAME = 'BugReportButton:SendingDone'\n\n    static #htmlContent = `\n  \t\t\t<style>\n  \t\t\t  button {\n  \t\t\t    cursor: pointer;\n  \t\t\t  }\n  \t\t\t  button:disabled {\n  \t\t\t    pointer-events: none;\n  \t\t\t    opacity: 0.3;\n  \t\t\t  }\n  \t\t\t  section {\n  \t\t\t    backdrop-filter: blur(3px);\n            bottom: 0;\n            display: none;\n            height: auto;\n            left: 0;\n            padding: 50px;\n            position: fixed;\n            right: 0;\n            top: 0;\n            overflow: auto;\n            width: auto;\n  \t\t\t  }\n  \t\t\t  header {\n  \t\t\t      text-align: right;\n  \t\t\t  }\n  \t\t\t  main {\n            background: #f7f7f7;\n            border-radius: 3px;\n            border: 1px solid #b3adad;\n            min-height: 600px;\n            min-width: 600px;\n            padding: 1% 10%;\n            position: relative;\n  \t\t\t  }\n  \t\t\t  main > div {\n            display: flex;\n            flex-direction: column;\n  \t\t\t  }\n  \t\t\t  screenshot-button {\n  \t\t\t    display: none;\n  \t\t\t  }\n  \t\t\t  textarea {\n  \t\t\t      margin: 20px auto;\n  \t\t\t      min-width: 600px;\n  \t\t\t  }\n          #closeBtn {\n            background: none;\n            border: 0;\n            color: #555;\n            font-family: sans-serif;\n            font-size: 1.2rem;\n            position: absolute;\n            right: 20px;\n          }\n          #closeBtn:hover {\n            color: #000;\n          }\n        \t#actionBtn {\n            background-color: lightgray;\n            border-radius: 5px;\n            border: 1px solid #333;\n            color: #333;\n            display: flex;\n            font-family: sans-serif;\n            font-size: 13pt;\n            height: 30px;\n            justify-content: center;\n            padding-top: 3px;\n            position: fixed;\n            right: -65px;\n            top: 50%;\n            transform: rotate(-90deg);\n            min-width: 150px;\n        }\n        #cancelBtn, #sendBtn {\n          background: #f7f7f7;\n          border-radius: 3px;\n          border: 1px solid #b3adad;\n          color: #333;\n          padding: 10px 20px;\n        }\n        #cancelBtn:hover, #sendBtn:hover {\n          background: #eee;\n        }\n        #captureErrorMsg {\n          text-align: center;\n          color: darkred;\n        }\n        #preview {\n          display: block;\n          margin-left: auto;\n          margin-right: auto;\n        }\n        #popup {\n          z-index: 1;\n        }\n        </style>\n        <screenshot-button></screenshot-button>\n        <button id=\"actionBtn\"></button>\n        <section id=\"popup\">\n          <main>\n            <button id=\"closeBtn\">X</button>\n            <div>\n                <img id=\"preview\" src=\"\" alt=\"Screenshot preview\"/>\n                <em id=\"captureErrorMsg\"></em>\n                <textarea id=\"message\" rows=\"5\" placeholder=\"${textareaPlaceholderText}\"></textarea>\n                <div style=\" text-align: center; \">\n                  <button id=\"cancelBtn\">${cancelText}</button>\n                  <button id=\"sendBtn\" style=\" font-weight: bold; \">${sendButtonText}</button>\n                </div>\n              </div>\n          </main>\n        </section>\n      `;\n\n    #screenshotButton;\n    #previewImg;\n    #captureErrorMsg;\n    #popup;\n    #screenshotAsBlob;\n    #textarea;\n    #sendBtn;\n    #sendTimeout;\n    #sendTimeoutHandle;\n\n    constructor() {\n      super();\n\n      const text = this.attributes.getNamedItem('text')?.value || 'Bug Report';\n      this.#sendTimeout = this.attributes.getNamedItem('send-timeout')?.value || sendTimeoutDefault;\n\n      const shadowDom = this.attachShadow({\n        mode: 'open'\n      });\n      shadowDom.innerHTML = BugReportButton.#htmlContent;\n      const button = shadowDom.getElementById('actionBtn');\n      button.innerText = text;\n      button.onclick = this.#clickCallback.bind(this);\n\n      this.#screenshotButton = shadowDom.querySelector('screenshot-button');\n      this.#previewImg = shadowDom.getElementById('preview');\n      this.#captureErrorMsg = shadowDom.getElementById('captureErrorMsg');\n      this.#popup = shadowDom.getElementById('popup');\n      this.#sendBtn = shadowDom.getElementById('sendBtn');\n      this.#textarea = shadowDom.querySelector('textarea');\n      const closePopupFn = this.#hidePopup.bind(this);\n      shadowDom.getElementById('closeBtn').onclick = closePopupFn;\n      shadowDom.getElementById('cancelBtn').onclick = closePopupFn;\n\n      this.#sendBtn.onclick = this.#send.bind(this);\n      window.addEventListener(BugReportButton.SENDING_DONE_EVENT_NAME, this.#sendingDone.bind(this));\n    }\n\n    #clickCallback() {\n      this.#screenshotButton\n        .takeScreenshot()\n        .then(blob => {\n          this.#showPopup(blob);\n          this.#screenshotAsBlob = blob;\n        })\n        .catch(e => {\n          console.error('bug-report-button:', e);\n          this.#showPopup(null, e);\n        });\n    }\n\n    #showPopup(blob, error) {\n      const imgEl = this.#previewImg;\n      imgEl.removeAttribute('width');\n      imgEl.onload = null;\n\n      if (blob) {\n        imgEl.src = URL.createObjectURL(blob);\n        imgEl.onload = () => {\n          imgEl.width = imgEl.width * 0.4;\n        };\n      } else {\n        imgEl.src = noPermitScreenCaptureImgUrl;\n        this.#captureErrorMsg.innerText = `${errorText}: ${error}`;\n      }\n\n      this.#popup.style.display = 'block';\n    }\n\n    #hidePopup() {\n      this.#popup.style.display = 'none';\n      this.#captureErrorMsg.innerText = '';\n      this.#screenshotAsBlob = null;\n    }\n\n    #send() {\n      const payload = {\n        screenshot: this.#screenshotAsBlob,\n        message: this.#textarea.value\n      };\n      window.dispatchEvent(new CustomEvent(BugReportButton.SEND_EVENT_NAME, {detail: payload}));\n      this.#startLoading();\n    }\n\n    #sendingDone(e) {\n      clearTimeout(this.#sendTimeoutHandle);\n      const eventDetail = e.detail;\n      this.#endLoading(eventDetail?.message, eventDetail?.success, eventDetail?.keepPopupOpenOnSuccess);\n    }\n\n    #startLoading() {\n      this.#sendBtn.innerText = sendButtonLoadingText;\n      this.shadowRoot.querySelectorAll('button, textarea').forEach(el => el.disabled = true);\n\n      if (this.#sendTimeout > 0) {\n        this.#sendTimeoutHandle = setTimeout(() => {\n          window.dispatchEvent(new CustomEvent(BugReportButton.SENDING_DONE_EVENT_NAME, {detail: {message: timeoutErrorMessage}}))\n        }, this.#sendTimeout);\n      }\n    }\n\n    #endLoading(message, success, keepPopupOpenOnSuccess) {\n      this.shadowRoot.querySelectorAll('button, textarea').forEach(el => el.disabled = false);\n      this.#sendBtn.innerText = sendButtonText;\n\n      if (success === true && keepPopupOpenOnSuccess !== true) {\n        this.#hidePopup();\n      }\n    }\n\n  }\n\n  window.customElements.define('bug-report-button', BugReportButton);\n  exportedClass = BugReportButton;\n} else {\n  class BugReportButton {\n\n    static SEND_EVENT_NAME = 'BugReportButton:Send'\n\n    static SENDING_DONE_EVENT_NAME = 'BugReportButton:SendingDone'\n  }\n  exportedClass = BugReportButton;\n}\n\nexport default exportedClass;\n", "const tr = {\n\tfeedbackButtonText: \"Hata bildir\",\n\tsendBtnText: \"Hatay\u0131 G\u00F6nder\",\n\tsendBtnLoading: \"L\u00FCtfen bekleyiniz...\",\n\tsuccessMessage: \"Hata kayd\u0131n\u0131z (TICKET_KEY) g\u00F6nderildi. Te\u015Fekk\u00FCr ederiz.\",\n\tsendErrorMessage: \"Hata kayd\u0131n\u0131z g\u00F6nderilemedi!\\nL\u00FCtfen bu mesaj\u0131 kapatt\u0131ktan sonra indirilen log dosyas\u0131n\u0131 yetkililere kendiniz iletin.\",\n\tclose: 'Kapat',\n\tcancel: '\u0130ptal',\n\tdescPlaceholder: 'Hata hakk\u0131nda a\u00E7\u0131klama (\u0130ste\u011Fe ba\u011Fl\u0131)',\n\tauthTokenNotFound: 'Eri\u015Fim token\\'\u0131 bulunamad\u0131!',\n\tloadingScreenshot: 'Ekran g\u00F6r\u00FCnt\u00FCs\u00FC y\u00FCkleniyor, l\u00FCtfen bekleyiniz...',\n}\n\nconst en = {\n\tfeedbackButtonText: \"Report a bug\",\n\tsendBtnText: \"Send bug report\",\n\tsendBtnLoading: \"Please wait...\",\n\tsuccessMessage: \"Your bug report (TICKET_KEY) is sent. Thank you.\",\n\tsendErrorMessage: \"Could not send bug report!\\nPlease send the log file that will be downloaded after closing this message to site admin yourself.\",\n\tclose: 'Close',\n\tcancel: 'Cancel',\n\tdescPlaceholder: 'Optional description of the bug',\n\tauthTokenNotFound: 'Access token not available!',\n\tloadingScreenshot: 'Loading screenshot, please wait...',\n}\n\nconst translations = {\n\ttr: tr,\n\ten: en,\n}\n\nfunction t(key, params) {\n  const text = translations.tr[key];\n  if (text) {\n  \tif (params) {\n  \t\treturn Object.keys(params).reduce((prev, curr) => prev.replace(curr, params[curr]), text);\n  \t}\n  \treturn text;\n  }\n  return `{??${key}??}`;\n}\n\nexport default t;\n", "import {IS_ON_BROWSER} from \"./isSSR\";\nimport t from \"./translations\";\nimport {AUTH_TOKEN_READY_EVENT} from \"./eventNames\";\nimport {CONSOLE_LABEL} from \"./config\";\n\nlet token = null;\n\nexport default function getToken() {\n\tif (token) {\n\t\treturn token;\n\t}\n\tconsole.error(CONSOLE_LABEL, 'authTokenNotFound');\n\talert(t('authTokenNotFound'));\n}\n\nif (IS_ON_BROWSER) {\n\twindow.addEventListener(AUTH_TOKEN_READY_EVENT, e => {\n\t\ttoken = e.detail;\n\t});\n}\n", "export default function downloadFile(blob) {\n  const fileUrl = URL.createObjectURL(blob);\n\n  const element = document.createElement('a');\n  element.setAttribute('href', fileUrl); //file location\n  element.setAttribute('download', blob.name); // file name\n  element.style.display = 'none';\n\n  document.body.appendChild(element);\n  element.click();\n  document.body.removeChild(element);\n};\n\n/*\nexport default function downloadFile(filename, content, mimeType = 'plain/text') {\n  const blob = new Blob([content], { type: mimeType });\n  const fileUrl = URL.createObjectURL(blob);\n\n  const element = document.createElement('a');\n  element.setAttribute('href', fileUrl); //file location\n  element.setAttribute('download', filename); // file name\n  element.style.display = 'none';\n\n  document.body.appendChild(element);\n  element.click();\n  document.body.removeChild(element);\n};\n */\n", "import {clearLogs} from \"./consoleInterceptor\";\nimport getToken from \"./token\";\nimport t from \"./translations\";\nimport downloadFile from \"./downloadFile\";\nimport {API_URL, CONSOLE_LABEL, TENANT_ID} from \"./config\";\n\n/**\n *\n * @param doneCallback function(isSuccess: boolean, message: string)\n * @param fd form data object\n * @returns {Promise<void>}\n */\nexport default async function send(doneCallback, fd) {\n\n  fetch(`${API_URL}/feedback`, {\n    method: 'POST',\n    body: fd,\n    headers: {\n      'Authorization': `Bearer ${getToken()}`,\n      'tenantId': TENANT_ID\n    }\n  })\n    .then(\n      function (response) {\n        if (response.status !== 200) {\n          console.error(CONSOLE_LABEL, 'Error in response. Response:', response);\n\n          // This doesn't seem to work correctly on forms that have multiple fields with same name but we don't have such a case\n          // https://stackoverflow.com/questions/41431322/how-to-convert-formdata-html5-object-to-json#comment102116212_55874235\n          handleForManualSending(fd);\n          doneCallback(false, t('sendErrorMessage'));\n          return;\n        }\n\n        response.text().then(function (text) {\n          clearLogs();\n          doneCallback(true, t('successMessage', {TICKET_KEY: text}));\n        });\n      })\n    .catch(function (err) {\n      console.error(CONSOLE_LABEL, 'Fetch Error', err);\n      handleForManualSending(fd);\n      doneCallback(false, t('sendErrorMessage'));\n    });\n  // end of fetch\n}\n\nfunction handleForManualSending(formData) {\n  for (let pair of formData.entries()) {\n    if (pair[0] === 'files') {\n      downloadFile(pair[1]);\n    }\n  }\n}\n", "import {IS_SSR} from \"./isSSR\";\n\nconst TENANT_ID = IS_SSR ? \"SSR\" : getTenantId();\n\nexport default function generateFileName() {\n  return `GrispiBugReport_${TENANT_ID}_${new Date().toISOString().split('.')[0]}`;\n}\n\nfunction getTenantId() {\n  if (window.location.host.match(/(grispi\\.com|grispi\\.net|grispi\\.dev)/)) {\n    return window.location.host.split('.')[0];\n  }\n  return window.location.host;\n}\n", "import generateFileName from \"./generateFileName\";\nimport {getLogs} from \"./consoleInterceptor\";\nimport isDebugEnabled from \"./isDebugEnabled\";\nimport {CONSOLE_LABEL} from \"./config\";\nimport {payloadsReadyOrTimeout} from \"./payloadsFromIframes\";\n\nfunction calculateMeta() {\n  const now = new Date();\n  return JSON.stringify({\n    url: location.href,\n    lang: window.navigator.language,\n    userAgent: window.navigator.userAgent,\n    // TODO consider switching to 'navigator.userAgentData.platform' when it's fully supported.\n    // window.navigator.platform: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/platform\n    // navigator.userAgentData.platform: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/userAgentData\n    os: window.navigator.platform,\n    date: now.toString(),\n    epochMs: now.getTime()\n  }, null, 2);\n}\n\nfunction getLogsAsBlob(payload) {\n  const description = payload.description ? `Description:\\n\\n${payload.description}\\n\\n` : '';\n  const meta = `Meta:\\n\\n${payload.meta}\\n\\n`;\n  const cookie = `Cookie:\\n\\n${payload.cookie}\\n\\n`;\n  const lStorage = `LocalStorage:\\n\\n${payload.lStorage}\\n\\n`;\n  const sStorage = `SessionStorage:\\n\\n${payload.sStorage}\\n\\n`;\n  const logs = payload.logs;\n  return new Blob([meta, description, cookie, lStorage, sStorage, logs], { type: 'plain/text' });\n}\n\nfunction prepareFormData(payload, iframePayloads) {\n  isDebugEnabled() && console.debug(CONSOLE_LABEL, 'payload, iframePayloads', payload, iframePayloads);\n\n  const description = payload.message;\n  // We will keep the message in payload object as well so that in offline file download mode\n  // the 'description' info is not lost\n\n  const fd = new FormData();\n  fd.append('description', description);\n  fd.append('meta', payload.meta);\n\n  [payload, iframePayloads].flat().forEach(p => {\n\n    // don't use '.log' extension, chrome shows a scary warning trying to convince end users to discard the downloaded file\n    fd.append('files', getLogsAsBlob(p), `${p.fileName}.txt`);\n\n    // screenshotBlob maybe null\n    p.screenshot && fd.append('files', p.screenshot, `${p.fileName}_screenshot.png`);\n  });\n\n  return fd;\n}\n\nexport function generatePayloadOnlyForThisPage() {\n  const meta = calculateMeta();\n  const lStorage = JSON.stringify(localStorage, 0, 2);\n  const sStorage = JSON.stringify(sessionStorage, 0, 2);\n  const cookie = document.cookie;\n  const fileName = generateFileName();\n  const logs = getLogs();\n\n  return {\n    meta,\n    cookie,\n    lStorage,\n    sStorage,\n    logs,\n    fileName\n  };\n}\n\nexport function generatePayload(screenshotBlob, message) {\n\n  const payload = generatePayloadOnlyForThisPage();\n\n  payload.message = message;\n\n  if (screenshotBlob) {\n    payload.screenshot = screenshotBlob;\n  }\n\n  return new Promise((resolve, reject) => {\n    payloadsReadyOrTimeout().then(payloads => {\n      resolve(prepareFormData(payload, payloads));\n    })\n      .catch(error => {\n        console.error(CONSOLE_LABEL, '[handled] Error occurred while collecting logs from iframes', error);\n        resolve(prepareFormData(payload, []));\n      });\n  });\n}\n", "import {IS_SSR} from \"./isSSR\";\nimport {RETRIEVE_PAYLOAD_REQUEST, RETRIEVE_PAYLOAD_RESPONSE} from \"./eventNames\";\nimport {payloadRetrieved} from \"./payloadsFromIframes\";\nimport isDebugEnabled from \"./isDebugEnabled\";\nimport BugReportButton from \"./bug-report-button/bug-report-button\";\nimport send from \"./logSender\";\nimport {CONSOLE_LABEL} from \"./config\";\nimport {generatePayload, generatePayloadOnlyForThisPage} from \"./generatePayload\";\n\nfunction sendDoneCallback(success, message) {\n\twindow.dispatchEvent(new CustomEvent(BugReportButton.SENDING_DONE_EVENT_NAME, {detail: {success, message}}));\n}\n\nexport default function registerEventHandlers() {\n\tif (IS_SSR) {\n\t\treturn;\n\t}\n\n\twindow.addEventListener(BugReportButton.SEND_EVENT_NAME, evt => {\n\t\tgeneratePayload(evt.detail.screenshot, evt.detail.message)\n\t\t\t.then(formData => send(sendDoneCallback, formData));\n\t});\n\n\tisDebugEnabled() && console.debug(CONSOLE_LABEL, 'Registering message handler.');\n\twindow.addEventListener(\"message\", async (e) => {\n\t\tif (ignoreEvent(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {origin, source} = e;\n\t\tconst eventData = e.data;\n\n\t\tif (!isTrusted(origin)) {\n\t\t\tisDebugEnabled() && console.debug(CONSOLE_LABEL, `Event from '${origin}' is not trusted, ignoring...`);\n\t\t\treturn;\n\t\t}\n\t\tif (typeof eventData !== 'object' || typeof eventData.type !== 'string' || eventData.type.length === 0) {\n\t\t\tisDebugEnabled() && console.debug(CONSOLE_LABEL, `Event data from '${origin}' is invalid.`, eventData);\n\t\t\treturn;\n\t\t}\n\n\t\tconst type = eventData.type;\n\n\t\tisDebugEnabled() && console.debug(CONSOLE_LABEL, 'eventHandlers', window.location.href, eventData.type, eventData.data);\n\n\t\tswitch (type) {\n\t\t\tcase RETRIEVE_PAYLOAD_REQUEST: {\n\t\t\t\tconst response = {\n\t\t\t\t\ttype: RETRIEVE_PAYLOAD_RESPONSE,\n\t\t\t\t\tpayload: generatePayloadOnlyForThisPage()\n\t\t\t\t};\n\t\t\t\tconsole.debug(CONSOLE_LABEL, 'Sending RETRIEVE_PAYLOAD_RESPONSE', response);\n\t\t\t\tsource.postMessage(response, origin);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase RETRIEVE_PAYLOAD_RESPONSE: {\n\t\t\t\tpayloadRetrieved(eventData.payload);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tconsole.warn(CONSOLE_LABEL, `Invalid event type: '${type}'.`, e);\n\t\t}\n\t});\n}\n\nfunction isTrusted(origin) {\n\tisDebugEnabled() && console.debug(CONSOLE_LABEL, `Checking if '${origin}' is trusted or not.`);\n\treturn true; // FIXME\n}\n\n// @customizationCandidate: function ignoreEvent(e: MessageEvent): boolean\nconst IGNORE_EVENTS = ['react-devtools-content-script', 'react-devtools-bridge'];\nfunction ignoreEvent(e/*: MessageEvent*/) {\n\treturn IGNORE_EVENTS.includes(e?.data?.source);\n}\n", "import {LONG_VERSION} from './version';\nimport {IS_SSR, IS_ON_BROWSER} from \"./isSSR\";\nimport registerEventHandlers from \"./eventHandlers\";\nimport {CONSOLE_LABEL} from \"./config\";\n\nconst NOOP = function(){}\n\nconst LOG_TYPE = {\n  trace: 'T',\n  debug: 'D',\n  log: 'L',\n  info: 'I',\n  warn: 'W',\n  error: 'E'\n}\n\nconst logOriginal = IS_SSR ? NOOP : console.log.bind(window.console);\nconst traceOriginal = IS_SSR ? NOOP : console.trace.bind(window.console);\nconst debugOriginal = IS_SSR ? NOOP : console.debug.bind(window.console);\nconst infoOriginal = IS_SSR ? NOOP : console.info.bind(window.console);\nconst warnOriginal = IS_SSR ? NOOP : console.warn.bind(window.console);\nconst errorOriginal = IS_SSR ? NOOP : console.error.bind(window.console);\n\nconst startTime = Date.now();\n\nlet allLogs = \"\";\nlet consoleIntercepted = false;\n\nregisterEventHandlers();\n\nfunction parseLog(args, logType) {\n  let s = [Date.now() - startTime, logType];\n  for (const a of args) {\n    if (typeof a === \"undefined\") {\n      s.push(\"undefined\");\n    }\n    else if (typeof a === \"object\") {\n      if (a instanceof Error) {\n        s.push(a.stack || a.toString());\n      }\n      else {\n        s.push(JSON.stringify(a));\n      }\n    }\n    else if (typeof a === \"boolean\") {\n      s.push(a);\n    }\n    else if (typeof a === \"number\") {\n      s.push(a);\n    }\n    else if (typeof a === \"bigint\") {\n      s.push(a);\n    }\n    else if (typeof a === \"string\") {\n      s.push(a);\n    }\n    else if (typeof a === \"symbol\") {\n      s.push(a);\n    }\n    else if (typeof a === \"function\") {\n      s.push(`[Function ${a.name}]`);\n    }\n    else {\n      s.push(`[Unrecognized type ${a}]`)\n    }\n  }\n  //TODO xxx add file name and line number https://github.com/stacktracejs/stacktrace.js\n  return s.join(' ');\n}\n\nfunction persist(log) {\n  allLogs += \"\\n\" + log;\n}\n\nfunction _log(args, logType) {\n  const log = parseLog(args, logType);\n  persist(log);\n}\n\nfunction log() {\n  _log(arguments, LOG_TYPE.log)\n}\n\nfunction trace() {\n  // TODO get the actual stack https://stackoverflow.com/a/6715624/878361\n  _log(arguments, LOG_TYPE.trace)\n}\n\nfunction debug() {\n  _log(arguments, LOG_TYPE.debug)\n}\n\nfunction info() {\n  _log(arguments, LOG_TYPE.info)\n}\n\nfunction warn() {\n  _log(arguments, LOG_TYPE.warn)\n}\n\nfunction error() {\n  _log(arguments, LOG_TYPE.error)\n}\n\nexport function getLogs() {\n  const startTimeMessage = `\\nStart time: ${startTime}\\n`;\n  return LONG_VERSION + startTimeMessage + allLogs;\n}\n\nexport function clearLogs() {\n  allLogs = \"\";\n}\n\nexport function interceptConsole() {\n  if (!IS_ON_BROWSER) {\n    console.debug(CONSOLE_LABEL, 'Not on browser, ignoring...');\n    return;\n  }\n  if (!consoleIntercepted && IS_ON_BROWSER) {\n\n    // console.log\n    window.console.log = function() {\n      logOriginal.apply(window.console, arguments);\n      log.apply(null, arguments);\n    }\n\n    // console.trace\n    window.console.trace = function() {\n      traceOriginal.apply(window.console, arguments);\n      trace.apply(null, arguments);\n    }\n\n    // console.debug\n    window.console.debug = function() {\n      debugOriginal.apply(window.console, arguments);\n      debug.apply(null, arguments);\n    }\n\n    // console.info\n    window.console.info = function() {\n      infoOriginal.apply(window.console, arguments);\n      info.apply(null, arguments);\n    }\n\n    // console.warn\n    window.console.warn = function() {\n      warnOriginal.apply(window.console, arguments);\n      warn.apply(null, arguments);\n    }\n\n    // console.error\n    window.console.error = function() {\n      errorOriginal.apply(window.console, arguments);\n      error.apply(null, arguments);\n    }\n\n    consoleIntercepted = true;\n  }\n  else {\n    warnOriginal(CONSOLE_LABEL, 'Console is already intercepted!');\n  }\n}\n"],
  "mappings": "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",
  "names": ["src_exports", "__export", "clearLogs", "getLogs", "interceptConsole", "__toCommonJS", "VERSION", "LONG_VERSION", "IS_ON_BROWSER", "IS_SSR", "EVENT_NAME_PREFIX", "AUTH_TOKEN_READY_EVENT", "RETRIEVE_PAYLOAD_REQUEST", "RETRIEVE_PAYLOAD_RESPONSE", "isDebugEnabled", "CONSOLE_LABEL", "tmpUrl", "hostname", "IS_SSR", "API_URL", "TENANT_ID", "TIMEOUT", "counter", "payloads", "payloadRequested", "isDebugEnabled", "CONSOLE_LABEL", "payloadRetrieved", "payload", "payloadsReadyOrTimeout", "el", "RETRIEVE_PAYLOAD_REQUEST", "requestedAt", "resolve", "reject", "intervalHandler", "elapsed", "exportedClass", "ScreenshotButton", "#htmlContent", "#text", "#useComputedStyle", "#timeout", "#previewTargetScale", "#video", "#canvas", "#screenshot", "#removeAttributes", "#optionsFromAttributes", "startButton", "computedStyle", "key", "#previewTarget", "options", "isFromInternalEvent", "timeout", "resolve", "reject", "stream", "streamSettings", "blob", "previewTarget", "track", "err", "exportedClass", "textareaPlaceholderText", "sendButtonText", "sendButtonLoadingText", "cancelText", "errorText", "timeoutErrorMessage", "sendTimeoutDefault", "noPermitScreenCaptureImgUrl", "BugReportButton", "#htmlContent", "#screenshotButton", "#previewImg", "#captureErrorMsg", "#popup", "#screenshotAsBlob", "#textarea", "#sendBtn", "#sendTimeout", "#sendTimeoutHandle", "text", "shadowDom", "button", "#clickCallback", "closePopupFn", "#hidePopup", "#send", "#sendingDone", "blob", "#showPopup", "e", "error", "imgEl", "payload", "#startLoading", "eventDetail", "#endLoading", "el", "message", "success", "keepPopupOpenOnSuccess", "bug_report_button_default", "tr", "en", "translations", "t", "key", "params", "text", "prev", "curr", "translations_default", "token", "getToken", "CONSOLE_LABEL", "translations_default", "IS_ON_BROWSER", "AUTH_TOKEN_READY_EVENT", "downloadFile", "blob", "fileUrl", "element", "send", "doneCallback", "fd", "API_URL", "getToken", "TENANT_ID", "response", "CONSOLE_LABEL", "handleForManualSending", "translations_default", "text", "clearLogs", "err", "formData", "pair", "downloadFile", "TENANT_ID", "IS_SSR", "getTenantId", "generateFileName", "calculateMeta", "now", "getLogsAsBlob", "payload", "description", "meta", "cookie", "lStorage", "sStorage", "logs", "prepareFormData", "iframePayloads", "isDebugEnabled", "CONSOLE_LABEL", "fd", "p", "generatePayloadOnlyForThisPage", "fileName", "generateFileName", "getLogs", "generatePayload", "screenshotBlob", "message", "resolve", "reject", "payloadsReadyOrTimeout", "payloads", "error", "sendDoneCallback", "success", "message", "bug_report_button_default", "registerEventHandlers", "IS_SSR", "evt", "generatePayload", "formData", "send", "isDebugEnabled", "CONSOLE_LABEL", "ignoreEvent", "origin", "source", "eventData", "isTrusted", "type", "RETRIEVE_PAYLOAD_REQUEST", "response", "RETRIEVE_PAYLOAD_RESPONSE", "generatePayloadOnlyForThisPage", "payloadRetrieved", "IGNORE_EVENTS", "NOOP", "LOG_TYPE", "logOriginal", "IS_SSR", "traceOriginal", "debugOriginal", "infoOriginal", "warnOriginal", "errorOriginal", "startTime", "allLogs", "consoleIntercepted", "registerEventHandlers", "parseLog", "args", "logType", "s", "a", "persist", "log", "_log", "trace", "debug", "info", "warn", "error", "getLogs", "startTimeMessage", "LONG_VERSION", "clearLogs", "interceptConsole", "IS_ON_BROWSER", "CONSOLE_LABEL", "LONG_VERSION"]
}
